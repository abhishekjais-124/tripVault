{% load static %}
<nav class="fixed top-0 w-full z-50 glass-dark" id="main-navbar">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
            <!-- Logo -->
            <div class="flex items-center space-x-2" id="navbar-logo-container">
                <a href="{% url 'home' %}" class="flex items-center space-x-2 group" id="navbar-logo-link">
                    <div class="w-10 h-10 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-lg flex items-center justify-center transform group-hover:scale-110 transition-transform" id="navbar-logo-icon">
                        <i class="fas fa-map text-white text-lg"></i>
                    </div>
                    <span class="text-xl font-bold gradient-text hidden sm:inline">TripVault</span>
                </a>
            </div>
            <!-- Overall Balance Widget (top right) -->
            {% if not request.resolver_match or request.resolver_match.url_name != 'group_table' %}
            <div class="flex items-center ml-auto">
                <div class="flex flex-row items-center justify-center h-full px-3 py-0.5 rounded-lg border border-cyan-700 bg-slate-800/80 shadow-sm text-xs font-medium whitespace-nowrap gap-1" style="min-height:2.25rem;">
                    <i class="fas fa-scale-balanced text-cyan-400 text-base"></i>
                    {% if overall_balance < 0 %}
                        <span class="text-red-400 font-bold">-₹{{ overall_balance|floatformat:2|cut:"-" }}</span>
                    {% else %}
                        <span class="text-green-400 font-bold">₹{{ overall_balance|floatformat:2 }}</span>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center space-x-8">
                <a href="{% url 'home' %}" class="text-gray-300 hover:text-cyan-400 transition-colors duration-300 flex items-center space-x-1">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="{% url 'plan-dashboard' %}" class="text-gray-300 hover:text-cyan-400 transition-colors duration-300 flex items-center space-x-1">
                    <i class="fas fa-route"></i>
                    <span>Plan</span>
                </a>
                {% if request.user.is_authenticated %}
                    <a href="{% url 'group' %}" class="text-gray-300 hover:text-cyan-400 transition-colors duration-300 flex items-center space-x-1">
                        <i class="fas fa-users"></i>
                        <span>Groups</span>
                    </a>
                    <a href="{% url 'friends' %}" class="text-gray-300 hover:text-cyan-400 transition-colors duration-300 flex items-center space-x-1">
                        <i class="fas fa-user-friends"></i>
                        <span>Friends</span>
                    </a>
                    <a href="{% url 'notifications' %}" class="text-gray-300 hover:text-cyan-400 transition-colors duration-300 flex items-center space-x-1 relative">
                        <i class="fas fa-bell"></i>
                        <span>Activities</span>
                    </a>
                    {% if request.user.user %}
                        {% load custom_filters %}
                        <!-- Logo Only for Mobile -->
                        <!-- Mobile logo only, hidden on desktop -->
                        <a href="{% url 'home' %}" class="flex items-center space-x-2 group mx-auto md:mx-0 md:hidden">
                            <div class="w-10 h-10 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-lg flex items-center justify-center transform group-hover:scale-110 transition-transform">
                                <i class="fas fa-map text-white text-lg"></i>
                            </div>
                            <span class="text-xl font-bold gradient-text hidden sm:inline md:inline">TripVault</span>
                        </a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
    <style>
        @media (max-width: 767px) {
            #main-navbar {
                background: none !important;
                box-shadow: none !important;
                border: none !important;
                height: 64px;
                min-height: 64px;
                display: block !important;
            }
            #navbar-logo-container {
                width: 100%;
                display: block !important;
                margin-left: 0 !important;
            }
            #navbar-logo-link {
                margin-left: 0 !important;
                margin-right: auto !important;
                display: flex !important;
                align-items: center !important;
            }
            #navbar-logo-icon {
                width: 56px !important;
                height: 56px !important;
                background: none !important;
                box-shadow: none !important;
            }
            #navbar-logo-icon i {
                font-size: 2.5rem !important;
            }
            #main-navbar .gradient-text {
                display: none !important;
            }
            #main-navbar .hidden.md\:flex {
                display: none !important;
            }
        }
        @media (min-width: 768px) {
            #main-navbar {
                display: block !important;
            }
            #main-navbar .gradient-text {
                display: inline !important;
            }
        }
    </style>
</nav>

<script>
    document.getElementById('mobile-menu-btn')?.addEventListener('click', () => {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('hidden');
    });
</script>
// ...existing code...
</script>